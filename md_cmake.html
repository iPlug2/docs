<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iPlug 2: Building iPlug2 Projects with CMake</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 80px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iPlug2 - C++ Audio Plug-in Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Building iPlug2 Projects with CMake </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This document covers building iPlug2 plugin projects using CMake on all supported platforms.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
macOS</h2>
<ul>
<li><b>CMake</b> 3.14 or later</li>
<li><b>Ninja</b> (recommended) or Xcode</li>
<li><b>Xcode Command Line Tools</b></li>
</ul>
<div class="fragment"><div class="line"># Install via Homebrew</div>
<div class="line">brew install cmake ninja</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Windows</h2>
<ul>
<li><b>CMake</b> 3.14 or later</li>
<li><b>Visual Studio 2019 or 2022</b> with "Desktop development with C++" workload</li>
<li><b>Ninja</b> (optional, recommended for faster builds)</li>
</ul>
<p >CMake and Ninja can be installed via:</p><ul>
<li>Visual Studio Installer (includes CMake)</li>
<li><a href="https://cmake.org/download/">cmake.org</a></li>
<li><code>winget install Kitware.CMake</code> / <code>winget install Ninja-build.Ninja</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Web (Emscripten)</h2>
<ul>
<li><b>Emscripten SDK</b> for WebAssembly builds</li>
<li><b>WAM SDK</b> (downloaded via <code>Dependencies/download-iplug-sdks.sh</code>)</li>
</ul>
<div class="fragment"><div class="line"># Install Emscripten</div>
<div class="line">git clone https://github.com/emscripten-core/emsdk.git</div>
<div class="line">cd emsdk</div>
<div class="line">./emsdk install latest</div>
<div class="line">./emsdk activate latest</div>
<div class="line">source ./emsdk_env.sh</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md24"></a>
Generators</h1>
<p >CMake supports multiple build system generators:</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Ninja (Recommended)</h2>
<p >Fast, cross-platform. Works on macOS and Windows.</p>
<div class="fragment"><div class="line">cmake -G Ninja -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line">ninja</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Visual Studio (Windows)</h2>
<p >Multi-configuration generator. Supports x64 and ARM64EC architectures.</p>
<div class="fragment"><div class="line"># x64 (default)</div>
<div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A x64 ..</div>
<div class="line"> </div>
<div class="line"># ARM64EC (ARM64 with x64 emulation compatibility)</div>
<div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A ARM64EC ..</div>
<div class="line"> </div>
<div class="line"># Build from command line</div>
<div class="line">cmake --build . --config Release</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md27"></a>
Xcode (macOS/iOS/visionOS)</h2>
<p >Multi-configuration generator for Apple platforms.</p>
<div class="fragment"><div class="line">cmake -G Xcode ..</div>
<div class="line">cmake --build . --config Release</div>
<div class="line"># Or open the .xcodeproj in Xcode</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
Quick Start</h1>
<div class="fragment"><div class="line"># From your plugin project directory</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line"> </div>
<div class="line"># Configure (choose one)</div>
<div class="line">cmake -G Ninja ..                              # Ninja (macOS/Windows)</div>
<div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A x64 ..     # Visual Studio</div>
<div class="line">cmake -G Xcode ..                              # Xcode</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">cmake --build . --config Release</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md29"></a>
Supported Platforms &amp; Targets</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Target Suffix   </th><th class="markdownTableHeadNone">macOS   </th><th class="markdownTableHeadNone">Windows   </th><th class="markdownTableHeadNone">iOS   </th><th class="markdownTableHeadNone">visionOS   </th><th class="markdownTableHeadNone">Web    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Standalone App   </td><td class="markdownTableBodyNone"><code>-app</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">VST2   </td><td class="markdownTableBodyNone"><code>-vst2</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VST3   </td><td class="markdownTableBodyNone"><code>-vst3</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CLAP   </td><td class="markdownTableBodyNone"><code>-clap</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AAX   </td><td class="markdownTableBodyNone"><code>-aax</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">AUv2   </td><td class="markdownTableBodyNone"><code>-au</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AUv3   </td><td class="markdownTableBodyNone"><code>AU-framework</code>, <code>AUv3-appex</code>   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">✓   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WAM   </td><td class="markdownTableBodyNone"><code>-wam</code>, <code>-web</code>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">✓   </td></tr>
</table>
<p ><b>Notes:</b></p><ul>
<li>VST2 requires the VST2 SDK (deprecated, no longer distributed by Steinberg)</li>
<li>VST3 requires the VST3 SDK</li>
<li>CLAP requires the CLAP SDK</li>
<li>AAX requires the AAX SDK from Avid</li>
<li>AUv3 is embedded in the standalone APP on macOS</li>
<li>Linux is not yet supported</li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
Build Commands</h1>
<h2><a class="anchor" id="autotoc_md31"></a>
Build All Targets</h2>
<div class="fragment"><div class="line"># Ninja</div>
<div class="line">ninja</div>
<div class="line"> </div>
<div class="line"># Visual Studio / Xcode</div>
<div class="line">cmake --build . --config Release</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32"></a>
Build Specific Targets</h2>
<div class="fragment"><div class="line"># Ninja</div>
<div class="line">ninja MyPlugin-app       # Standalone app</div>
<div class="line">ninja MyPlugin-vst2      # VST2</div>
<div class="line">ninja MyPlugin-vst3      # VST3</div>
<div class="line">ninja MyPlugin-clap      # CLAP</div>
<div class="line">ninja MyPlugin-aax       # AAX</div>
<div class="line">ninja MyPlugin-au        # AUv2 (macOS)</div>
<div class="line"> </div>
<div class="line"># Visual Studio / Xcode</div>
<div class="line">cmake --build . --config Release --target MyPlugin-vst3</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md33"></a>
Build Options</h1>
<h2><a class="anchor" id="autotoc_md34"></a>
Common Options</h2>
<div class="fragment"><div class="line"># Debug build (default)</div>
<div class="line">cmake -G Ninja -DCMAKE_BUILD_TYPE=Debug ..</div>
<div class="line"> </div>
<div class="line"># Release build</div>
<div class="line">cmake -G Ninja -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line"> </div>
<div class="line"># Enable tracer/profiling</div>
<div class="line">cmake -G Ninja -DIPLUG2_TRACER=ON ..</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md35"></a>
macOS Options</h2>
<div class="fragment"><div class="line"># Universal binaries (Intel + Apple Silicon)</div>
<div class="line">cmake -G Ninja -DIPLUG2_UNIVERSAL=ON ..</div>
<div class="line"> </div>
<div class="line"># Or set architectures directly</div>
<div class="line">cmake -G Ninja -DCMAKE_OSX_ARCHITECTURES=&quot;arm64;x86_64&quot; ..</div>
<div class="line"> </div>
<div class="line"># Deployment target (default: 10.13)</div>
<div class="line">cmake -G Ninja -DCMAKE_OSX_DEPLOYMENT_TARGET=10.15 ..</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md36"></a>
Windows Options</h2>
<p >Architecture is set via the <code>-A</code> flag with Visual Studio generator:</p>
<div class="fragment"><div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A x64 ..      # 64-bit Intel/AMD</div>
<div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A ARM64EC ..  # ARM64 with x64 emulation compatibility</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md37"></a>
Debugging Options</h2>
<p >Set a host application for debugging plugins:</p>
<div class="fragment"><div class="line"># Windows (Visual Studio)</div>
<div class="line">cmake -G &quot;Visual Studio 17 2022&quot; -A x64 -DIPLUG2_DEBUG_HOST=&quot;C:/Program Files/REAPER (x64)/reaper.exe&quot; ..</div>
<div class="line"> </div>
<div class="line"># macOS (Xcode)</div>
<div class="line">cmake -G Xcode -DIPLUG2_DEBUG_HOST=&quot;/Applications/REAPER.app&quot; ..</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>IPLUG2_DEBUG_HOST</code>   </td><td class="markdownTableBodyNone">Path to host application (REAPER, Ableton, etc.)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>IPLUG2_DEBUG_HOST_ARGS</code>   </td><td class="markdownTableBodyNone">Command line arguments for the host   </td></tr>
</table>
<p ><b>Windows:</b> Sets <code>VS_DEBUGGER_COMMAND</code> for plugin targets, allowing F5 to launch host and attach debugger. If REAPER is installed at <code>C:/Program Files/REAPER (x64)/reaper.exe</code>, it is automatically used as the default.</p>
<p ><b>macOS:</b> Generates Xcode schemes for plugin targets. If <code>IPLUG2_DEBUG_HOST</code> is set, schemes use that executable. Otherwise, schemes are generated with no executable set, allowing you to choose "Ask on Launch" or configure manually in Xcode.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
iOS Options</h2>
<div class="fragment"><div class="line"># iOS Device</div>
<div class="line">cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DIPLUG2_IOS_PLATFORM=OS ..</div>
<div class="line"> </div>
<div class="line"># iOS Simulator</div>
<div class="line">cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DIPLUG2_IOS_PLATFORM=SIMULATOR ..</div>
<div class="line"> </div>
<div class="line"># Deployment target (default: 14)</div>
<div class="line">cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DIPLUG2_IOS_DEPLOYMENT_TARGET=15 ..</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
visionOS Options</h2>
<p >Requires Xcode 15+ with visionOS SDK.</p>
<div class="fragment"><div class="line"># visionOS Device</div>
<div class="line">cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DIPLUG2_IOS_PLATFORM=VISIONOS ..</div>
<div class="line"> </div>
<div class="line"># visionOS Simulator</div>
<div class="line">cmake -G Xcode -DCMAKE_SYSTEM_NAME=iOS -DIPLUG2_IOS_PLATFORM=VISIONOS_SIMULATOR ..</div>
</div><!-- fragment --><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><code>IPLUG2_IOS_PLATFORM</code>   </th><th class="markdownTableHeadNone">SDK   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>OS</code>   </td><td class="markdownTableBodyNone">iphoneos   </td><td class="markdownTableBodyNone">iOS device (default)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SIMULATOR</code>   </td><td class="markdownTableBodyNone">iphonesimulator   </td><td class="markdownTableBodyNone">iOS Simulator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>VISIONOS</code>   </td><td class="markdownTableBodyNone">xros   </td><td class="markdownTableBodyNone">visionOS device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VISIONOS_SIMULATOR</code>   </td><td class="markdownTableBodyNone">xrsimulator   </td><td class="markdownTableBodyNone">visionOS Simulator   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md40"></a>
Web/Emscripten Options</h2>
<div class="fragment"><div class="line"># Configure with Emscripten toolchain</div>
<div class="line">emcmake cmake -G Ninja -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line"> </div>
<div class="line"># Build WAM and Web targets</div>
<div class="line">ninja MyPlugin-wam       # Audio processor (WASM)</div>
<div class="line">ninja MyPlugin-web       # UI controller (WASM)</div>
<div class="line">ninja MyPlugin-wam-dist  # Complete distribution package</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
IGraphics Backends</h1>
<p >iPlug2 provides <code>${IGRAPHICS_LIB}</code> which is set based on cache variables, allowing backend switching at configure time.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Cache Variables</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable   </th><th class="markdownTableHeadNone">Options   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>IGRAPHICS_BACKEND</code>   </td><td class="markdownTableBodyNone"><code>NANOVG</code>, <code>SKIA</code>   </td><td class="markdownTableBodyNone"><code>NANOVG</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>IGRAPHICS_RENDERER</code>   </td><td class="markdownTableBodyNone"><code>GL2</code>, <code>GL3</code>, <code>METAL</code>, <code>CPU</code>   </td><td class="markdownTableBodyNone"><code>GL2</code> (Windows), <code>METAL</code> (macOS/iOS)   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md43"></a>
Configure at Build Time</h2>
<div class="fragment"><div class="line"># Default: NanoVG with GL2 (Windows) or Metal (macOS)</div>
<div class="line">cmake -G Ninja ..</div>
<div class="line"> </div>
<div class="line"># Skia with OpenGL 3</div>
<div class="line">cmake -G Ninja -DIGRAPHICS_BACKEND=SKIA -DIGRAPHICS_RENDERER=GL3 ..</div>
<div class="line"> </div>
<div class="line"># NanoVG with Metal (macOS)</div>
<div class="line">cmake -G Ninja -DIGRAPHICS_BACKEND=NANOVG -DIGRAPHICS_RENDERER=METAL ..</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md44"></a>
Available Targets</h2>
<div class="fragment"><div class="line"># NanoVG (lightweight, included in iPlug2)</div>
<div class="line">iPlug2::IGraphics::NanoVG        # GL2 (default)</div>
<div class="line">iPlug2::IGraphics::NanoVG::GL3   # OpenGL 3</div>
<div class="line">iPlug2::IGraphics::NanoVG::Metal # Metal (macOS/iOS)</div>
<div class="line"> </div>
<div class="line"># Skia (feature-rich, requires downloading dependencies)</div>
<div class="line">iPlug2::IGraphics::Skia::GL3     # OpenGL 3</div>
<div class="line">iPlug2::IGraphics::Skia::Metal   # Metal (macOS/iOS)</div>
<div class="line">iPlug2::IGraphics::Skia::CPU     # Software rendering</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md45"></a>
Project Structure</h1>
<p >A minimal CMake-enabled iPlug2 project:</p>
<div class="fragment"><div class="line">MyPlugin/</div>
<div class="line">├── CMakeLists.txt</div>
<div class="line">├── MyPlugin.cpp</div>
<div class="line">├── MyPlugin.h</div>
<div class="line">├── config.h</div>
<div class="line">└── resources/</div>
<div class="line">    ├── MyPlugin-macOS-Info.plist</div>
<div class="line">    ├── MyPlugin-VST3-Info.plist</div>
<div class="line">    ├── MyPlugin-CLAP-Info.plist</div>
<div class="line">    ├── fonts/</div>
<div class="line">    └── ...</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md46"></a>
The &lt;tt&gt;iplug_add_plugin&lt;/tt&gt; Macro</h1>
<p >The <code>iplug_add_plugin()</code> macro simplifies plugin project configuration, reducing ~190 lines of boilerplate to ~15 lines.</p>
<h2><a class="anchor" id="autotoc_md47"></a>
Basic Usage</h2>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.14)</div>
<div class="line">project(MyPlugin VERSION 1.0.0)</div>
<div class="line"> </div>
<div class="line">if(NOT DEFINED IPLUG2_DIR)</div>
<div class="line">  set(IPLUG2_DIR &quot;${CMAKE_CURRENT_SOURCE_DIR}/../..&quot; CACHE PATH &quot;iPlug2 root directory&quot;)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">include(${IPLUG2_DIR}/iPlug2.cmake)</div>
<div class="line">find_package(iPlug2 REQUIRED)</div>
<div class="line"> </div>
<div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  RESOURCES</div>
<div class="line">    resources/fonts/Roboto-Regular.ttf</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md48"></a>
Syntax</h2>
<div class="fragment"><div class="line">iplug_add_plugin(&lt;name&gt;</div>
<div class="line">  SOURCES &lt;file1&gt; [file2 ...]</div>
<div class="line">  [RESOURCES &lt;file1&gt; [file2 ...]]</div>
<div class="line">  [WEB_RESOURCES &lt;file1&gt; [file2 ...]]</div>
<div class="line">  [FORMATS &lt;format1&gt; [format2 ...]]</div>
<div class="line">  [EXCLUDE_FORMATS &lt;format1&gt; [format2 ...]]</div>
<div class="line">  [LINK &lt;library1&gt; [library2 ...]]</div>
<div class="line">  [DEFINES &lt;def1&gt; [def2 ...]]</div>
<div class="line">  [UI &lt;IGRAPHICS|WEBVIEW|NONE&gt;]</div>
<div class="line">  [WAM_SITE_ORIGIN &lt;origin&gt;]</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md49"></a>
Parameters</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SOURCES</code>   </td><td class="markdownTableBodyNone">Source files (.cpp, .h, .mm)   </td><td class="markdownTableBodyNone">Required    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>RESOURCES</code>   </td><td class="markdownTableBodyNone">Bundle resources (fonts, images) - goes into <code>Resources/</code>   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>WEB_RESOURCES</code>   </td><td class="markdownTableBodyNone">Web UI files (HTML, JS, CSS) - goes into <code>Resources/web/</code>   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>FORMATS</code>   </td><td class="markdownTableBodyNone">Target formats to build   </td><td class="markdownTableBodyNone"><code>ALL</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>EXCLUDE_FORMATS</code>   </td><td class="markdownTableBodyNone">Formats to exclude   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LINK</code>   </td><td class="markdownTableBodyNone">Additional libraries to link   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DEFINES</code>   </td><td class="markdownTableBodyNone">Additional compile definitions   </td><td class="markdownTableBodyNone">None    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>UI</code>   </td><td class="markdownTableBodyNone">UI framework: <code>IGRAPHICS</code>, <code>WEBVIEW</code>, or <code>NONE</code>   </td><td class="markdownTableBodyNone"><code>IGRAPHICS</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>WAM_SITE_ORIGIN</code>   </td><td class="markdownTableBodyNone">WAM site origin for CORS   </td><td class="markdownTableBodyNone"><code>"/"</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md50"></a>
Format Names</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Platforms    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>APP</code>   </td><td class="markdownTableBodyNone">Standalone application   </td><td class="markdownTableBodyNone">macOS, Windows    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VST3</code>   </td><td class="markdownTableBodyNone">VST3 plugin   </td><td class="markdownTableBodyNone">macOS, Windows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>CLAP</code>   </td><td class="markdownTableBodyNone">CLAP plugin   </td><td class="markdownTableBodyNone">macOS, Windows    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>AAX</code>   </td><td class="markdownTableBodyNone">AAX plugin (requires SDK)   </td><td class="markdownTableBodyNone">macOS, Windows    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>AU</code>   </td><td class="markdownTableBodyNone">Audio Unit v2   </td><td class="markdownTableBodyNone">macOS only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>AUV3</code>   </td><td class="markdownTableBodyNone">Audio Unit v3   </td><td class="markdownTableBodyNone">macOS, iOS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>WAM</code>   </td><td class="markdownTableBodyNone">Web Audio Module   </td><td class="markdownTableBodyNone">Emscripten only   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md51"></a>
Format Groups</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Group   </th><th class="markdownTableHeadNone">Expands To   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ALL</code>   </td><td class="markdownTableBodyNone">APP, VST2, VST3, CLAP, AAX, AU, AUV3, WAM   </td><td class="markdownTableBodyNone">Default. All formats    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ALL_PLUGINS</code>   </td><td class="markdownTableBodyNone">VST2, VST3, CLAP, AAX, AU, AUV3, WAM   </td><td class="markdownTableBodyNone">All plugin formats (no APP)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ALL_DESKTOP</code>   </td><td class="markdownTableBodyNone">APP, VST2, VST3, CLAP, AAX, AU, AUV3   </td><td class="markdownTableBodyNone">All desktop formats (no WAM)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MINIMAL_PLUGINS</code>   </td><td class="markdownTableBodyNone">VST3, CLAP, AU   </td><td class="markdownTableBodyNone">Core plugin formats only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DESKTOP</code>   </td><td class="markdownTableBodyNone">APP, VST3, CLAP, AAX, AU   </td><td class="markdownTableBodyNone">Desktop without VST2/AUv3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>WEB</code>   </td><td class="markdownTableBodyNone">WAM   </td><td class="markdownTableBodyNone">Web formats only   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md52"></a>
Examples</h2>
<p ><b>Standard <a class="el" href="class_i_graphics.html" title="The lowest level base class of an IGraphics context.">IGraphics</a> plugin:</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  RESOURCES</div>
<div class="line">    resources/fonts/Roboto-Regular.ttf</div>
<div class="line">)</div>
</div><!-- fragment --><p ><b>Desktop plugin with AUv3 (no WAM):</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  RESOURCES</div>
<div class="line">    resources/fonts/Roboto-Regular.ttf</div>
<div class="line">  FORMATS ALL_DESKTOP</div>
<div class="line">)</div>
</div><!-- fragment --><p ><b>Minimal plugin (VST3, CLAP, AU only):</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  FORMATS MINIMAL_PLUGINS</div>
<div class="line">)</div>
</div><!-- fragment --><p ><b>Plugin with extra libraries:</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  LINK iPlug2::Extras::Synth iPlug2::Extras::HIIR</div>
<div class="line">)</div>
</div><!-- fragment --><p ><b>Plugin without UI (DSP-only):</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  UI NONE</div>
<div class="line">  DEFINES NO_IGRAPHICS</div>
<div class="line">  EXCLUDE_FORMATS WAM</div>
<div class="line">)</div>
</div><!-- fragment --><p ><b>WebView UI plugin:</b></p>
<div class="fragment"><div class="line">iplug_add_plugin(${PROJECT_NAME}</div>
<div class="line">  SOURCES</div>
<div class="line">    MyPlugin.cpp</div>
<div class="line">    MyPlugin.h</div>
<div class="line">    resources/resource.h</div>
<div class="line">  WEB_RESOURCES</div>
<div class="line">    resources/web/index.html</div>
<div class="line">    resources/web/script.js</div>
<div class="line">  UI WEBVIEW</div>
<div class="line">  EXCLUDE_FORMATS WAM</div>
<div class="line">)</div>
</div><!-- fragment --><p >Note: <code>WEB_RESOURCES</code> preserves subdirectory structure. Files in <code>resources/web/assets/</code> will be placed in <code>Resources/web/assets/</code> in the bundle.</p>
<p >See <code>Examples/IPlugEffect/CMakeLists.txt</code> for a complete working example.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
Build Output</h1>
<h2><a class="anchor" id="autotoc_md54"></a>
macOS</h2>
<div class="fragment"><div class="line">build/out/</div>
<div class="line">├── MyPlugin.app/                    # Standalone (with embedded AUv3)</div>
<div class="line">│   └── Contents/</div>
<div class="line">│       ├── Frameworks/</div>
<div class="line">│       │   └── MyPluginAU.framework/</div>
<div class="line">│       └── PlugIns/</div>
<div class="line">│           └── MyPlugin.appex/</div>
<div class="line">├── MyPlugin.vst3/</div>
<div class="line">├── MyPlugin.clap/</div>
<div class="line">├── MyPlugin.aaxplugin/</div>
<div class="line">├── MyPlugin.component/              # AUv2</div>
<div class="line">├── MyPluginAU.framework/            # AUv3 framework</div>
<div class="line">└── MyPlugin.appex/                  # AUv3 appex</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md55"></a>
Windows</h2>
<div class="fragment"><div class="line">build/out/</div>
<div class="line">├── MyPlugin.exe                     # Standalone app</div>
<div class="line">├── MyPlugin.vst3/</div>
<div class="line">│   └── Contents/</div>
<div class="line">│       └── x86_64-win/              # or arm64ec-win</div>
<div class="line">│           └── MyPlugin.vst3</div>
<div class="line">├── MyPlugin.clap</div>
<div class="line">└── MyPlugin.aaxplugin/</div>
<div class="line">    └── Contents/</div>
<div class="line">        └── x64/                     # or ARM64EC</div>
<div class="line">            └── MyPlugin.aaxplugin</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md56"></a>
Web</h2>
<div class="fragment"><div class="line">build/out/MyPlugin/</div>
<div class="line">├── scripts/</div>
<div class="line">│   ├── MyPlugin-wam.js     # WAM processor loader</div>
<div class="line">│   ├── MyPlugin-wam.wasm   # Audio processing module</div>
<div class="line">│   ├── MyPlugin-web.js     # Web controller loader</div>
<div class="line">│   └── MyPlugin-web.wasm   # UI module</div>
<div class="line">├── index.html              # Test page</div>
<div class="line">├── descriptor.json         # WAM metadata</div>
<div class="line">└── styles/                 # CSS assets</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md57"></a>
Deployment</h1>
<h2><a class="anchor" id="autotoc_md58"></a>
Default Deployment Paths</h2>
<p >Plugins are automatically deployed (symlinked or copied) to standard locations:</p>
<p ><b>macOS:</b></p><ul>
<li>VST2: <code>~/Library/Audio/Plug-Ins/VST</code></li>
<li>VST3: <code>~/Library/Audio/Plug-Ins/VST3</code></li>
<li>CLAP: <code>~/Library/Audio/Plug-Ins/CLAP</code></li>
<li>AUv2: <code>~/Library/Audio/Plug-Ins/Components</code></li>
<li>AAX: <code>/Library/Application Support/Avid/Audio/Plug-Ins</code></li>
<li>APP: <code>~/Applications</code></li>
</ul>
<p ><b>Windows:</b></p><ul>
<li>VST2: <code>PROGRAMFILES%\VstPlugins</code></li>
<li>VST3: <code>LOCALAPPDATA%\Programs\Common\VST3</code> (per-user, no admin required)</li>
<li>CLAP: <code>LOCALAPPDATA%\Programs\Common\CLAP</code> (per-user, no admin required)</li>
<li>AAX: <code>COMMONPROGRAMFILES%\Avid\Audio\Plug-Ins</code></li>
</ul>
<blockquote class="doxtable">
<p >&zwj;<b>Note:</b> VST3/CLAP use per-user paths by default (spec-compliant, hosts scan both locations). For system-wide installation, use <code>-DIPLUG_VST3_DEPLOY_PATH="%COMMONPROGRAMFILES%\VST3"</code>. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md59"></a>
Deployment Options</h2>
<div class="fragment"><div class="line"># Disable automatic deployment</div>
<div class="line">cmake -G Ninja -DIPLUG_DEPLOY_PLUGINS=OFF ..</div>
<div class="line"> </div>
<div class="line"># Use symlink instead of copy (default is COPY)</div>
<div class="line">cmake -G Ninja -DIPLUG_DEPLOY_METHOD=SYMLINK ..</div>
<div class="line"> </div>
<div class="line"># Custom deployment paths</div>
<div class="line">cmake -G Ninja -DIPLUG_VST3_DEPLOY_PATH=/custom/path ..</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md60"></a>
Platform-Specific Notes</h1>
<h2><a class="anchor" id="autotoc_md61"></a>
macOS</h2>
<p ><b>Code Signing (required for AUv3):</b></p>
<div class="fragment"><div class="line"># Sign from innermost to outermost</div>
<div class="line">codesign -s - out/MyPlugin.app/Contents/Frameworks/MyPluginAU.framework</div>
<div class="line">codesign -s - out/MyPlugin.app/Contents/PlugIns/MyPlugin.appex</div>
<div class="line">codesign -s - out/MyPlugin.app</div>
<div class="line"> </div>
<div class="line"># Run app to register AUv3</div>
<div class="line">open out/MyPlugin.app</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;<b>Warning:</b> Ad-hoc signing (<code>-s -</code>) is for <b>local development only</b>. Ad-hoc signed apps cannot be distributed, will not run on other machines, and are blocked by Gatekeeper. For distribution, you must sign with a valid Developer ID certificate and notarize the app (see below). </p>
</blockquote>
<p><b>Distribution signing:</b></p>
<div class="fragment"><div class="line">codesign -s &quot;Developer ID Application: Your Name (TEAM_ID)&quot; out/MyPlugin.app</div>
<div class="line">xcrun notarytool submit out/MyPlugin.app --apple-id your@email.com --team-id TEAM_ID --wait</div>
<div class="line">xcrun stapler staple out/MyPlugin.app</div>
</div><!-- fragment --><p ><b>Validating Audio Units:</b></p>
<div class="fragment"><div class="line">auval -a                              # List all registered AUs</div>
<div class="line">auval -v aufx &lt;subtype&gt; &lt;manufacturer&gt;  # Validate effect</div>
<div class="line">auval -v aumu &lt;subtype&gt; &lt;manufacturer&gt;  # Validate instrument</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md62"></a>
Windows</h2>
<ul>
<li>MSVC uses static runtime (<code>/MT</code> for Release, <code>/MTd</code> for Debug)</li>
<li>Multi-config generators (Visual Studio) require <code>--config</code> flag when building</li>
<li>Use ARM64EC for ARM64 Windows (provides x64 plugin compatibility)</li>
</ul>
<h2><a class="anchor" id="autotoc_md63"></a>
iOS</h2>
<ul>
<li>Minimum deployment target: iOS 14 (configurable)</li>
<li>Device builds require code signing</li>
<li>AUv3 is embedded in the standalone app</li>
</ul>
<h2><a class="anchor" id="autotoc_md64"></a>
visionOS</h2>
<ul>
<li>Requires Xcode 15+ with visionOS SDK installed</li>
<li>Minimum deployment target: 1.0</li>
</ul>
<h2><a class="anchor" id="autotoc_md65"></a>
Web/Emscripten</h2>
<p >WAM plugins consist of two WASM modules:</p><ol type="1">
<li><b>WAM Processor</b> (<code>-wam</code>) - DSP/audio (runs in AudioWorklet)</li>
<li><b>Web Controller</b> (<code>-web</code>) - UI/graphics (runs in main thread)</li>
</ol>
<p ><b>Testing:</b></p>
<p >WAM requires HTTPS with specific headers for SharedArrayBuffer support. Use <a href="https://github.com/FiloSottile/mkcert">mkcert</a> to create local certificates:</p>
<div class="fragment"><div class="line"># Install mkcert and create local CA</div>
<div class="line">brew install mkcert  # macOS</div>
<div class="line">mkcert -install</div>
<div class="line">mkcert localhost</div>
<div class="line"> </div>
<div class="line"># Serve with HTTPS (requires a server that sets COOP/COEP headers)</div>
</div><!-- fragment --><p >Alternatively, use <code>emrun</code> which handles the required headers:</p>
<div class="fragment"><div class="line">cd build/out/wam</div>
<div class="line">emrun --no_emrun_detect index.html</div>
</div><!-- fragment --><p ><b>Notes:</b></p><ul>
<li>WAM SDK must be downloaded via <code>Dependencies/download-iplug-sdks.sh</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md66"></a>
Linux</h2>
<p >Linux is not yet supported. CMake configuration will show an error message.</p>
<h1><a class="anchor" id="autotoc_md67"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md68"></a>
General</h2>
<ul>
<li><b>Missing symbols</b>: Verify all required frameworks/libraries are linked</li>
<li><b>Source files not found</b>: Check paths in <code>target_sources()</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md69"></a>
macOS</h2>
<ul>
<li><b>AUv3 not registering</b>: Ensure app is signed and has been run at least once</li>
<li>**"Bundle format unrecognized"**: Check PkgInfo files exist; use <code>cp -R</code> for frameworks</li>
</ul>
<h2><a class="anchor" id="autotoc_md70"></a>
Windows</h2>
<ul>
<li><b>Link errors with runtime</b>: Ensure all libraries use same runtime (<code>/MT</code> vs <code>/MD</code>)</li>
<li><b>Missing DLLs</b>: Use static runtime or deploy required DLLs</li>
</ul>
<h1><a class="anchor" id="autotoc_md71"></a>
Examples</h1>
<p >The following examples include CMakeLists.txt and are built automatically from the root:</p>
<p ><b>Standard <a class="el" href="class_i_graphics.html" title="The lowest level base class of an IGraphics context.">IGraphics</a>:</b> IPlugEffect, IPlugInstrument, IPlugControls, IPlugConvoEngine, IPlugChunks, IPlugDrumSynth, IPlugMidiEffect, IPlugOSCEditor, IPlugResponsiveUI, IPlugSideChain, IPlugSurroundEffect, IPlugVisualizer</p>
<p ><b>WebView:</b> IPlugWebUI, IPlugP5js, IPlugSvelteUI</p>
<p ><b>Swift/Cocoa (Xcode generator only):</b> IPlugSwiftUI, IPlugCocoaUI - Automatically included when using <code>-G Xcode</code> on macOS.</p>
<p ><b>REAPER:</b> IPlugReaperExtension, IPlugReaperPlugin</p>
<p ><b>Tests:</b> IGraphicsTest, IGraphicsStressTest, MetaParamTest</p>
<h1><a class="anchor" id="autotoc_md72"></a>
See Also</h1>
<ul>
<li><a href="https://iplug2.github.io/docs">iPlug2 Documentation</a></li>
<li><a href="https://cmake.org/documentation/">CMake Documentation</a></li>
<li><a href="../Examples/IPlugEffect/CMakeLists.txt">Examples/IPlugEffect/CMakeLists.txt</a> - Reference CMake template </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
